<?xml version="1.0" encoding="utf-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:bibi="http://xmlns.jcp.org/jsf/composite/bibi"
	template="/view/templates/template.xhtml">

	<ui:param name="page" value="return_form" />

	<ui:define name="content">
	<h1>#{msg['returnForm.headline']}</h1>
	<h:form id="form_return_form">

   <!-- <bibi:reactiveInputText value="#{lending.user.emailAddress}"><f:validator validatorId="userValidator"/></bibi:reactiveInputText> -->
		
		<h:panelGroup layout="block" styleClass="form-group">
			<h:outputLabel for="returnForm_mail_field" value="#{msg['returnForm.mail_field']}"/>
			<h:inputText id="returnForm_mail_field" value="#{returnForm.user.emailAddress}" styleClass="form-control" required="true" onchange="submit()" valueChangelistener="#{returnForm.setUserEmail}"> 
				<f:validator validatorId="userValidator"/>
			</h:inputText>
		</h:panelGroup>
		
		
		
	<h:panelGroup layout="block" styleClass="container">
		<ui:repeat var="copy" value="#{returnForm.copies}" varStatus="status">
		
	   <!-- <bibi:reactiveInputField id="field" value="#{copy.signature}"/><f:validator validatorId="returnFormSignatureValidator"/></bibi:reactiveInputField>-->
			
			 <h:panelGroup layout="block" styleClass="form-group">
				<h:outputLabel for="returnForm_signature_field" value="#{msg['returnForm.signature_field']}"/>
				<h:inputText id="returnForm_signature_field" value="#{copy.signature}" styleClass="form-control">
					<f:validator validatorId="returnFormSignatureValidator"/>
				</h:inputText>
			</h:panelGroup>
		</ui:repeat>
	</h:panelGroup>
		
		<h:commandButton id="button_add_signature_return_field"
							action="#{returnForm.addSignatureInputField()}" 
							value="#{msg['returnForm.add_input']}"
							styleClass="btn btn-secondary"/>
		<h:commandButton id="button_return_copies"
							action="#{returnForm.returnCopies()}" 
							value="#{msg['returnForm.return_copies']}"
							styleClass="btn btn-primary"/>			

	</h:form>
	</ui:define>

</ui:composition>
