<?xml version="1.0" encoding="utf-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:bibi="http://xmlns.jcp.org/jsf/composite/bibi">

	<h:panelGroup layout="block"
		styleClass="header container-fluid p-3 d-flex border-bottom justify-content-center justify-content-lg-between">

		<h:panelGroup layout="block" styleClass="information me-5">

			<!-- TASK: replace this mechanism with a separate facelet streaming binary data -->
			<!-- <h:graphicImage
					value="data:image/png;base64,#{pageHeader.applicationBase64Logo}"/> -->

			<h:outputText value="#{pageHeader.application.name}" styleClass="h2" />

		</h:panelGroup>

		<h:panelGroup layout="block" styleClass="menu nav">

			<h:outputLink value="#help" styleClass="nav-item"
				p:data-bs-toggle="offcanvas" p:role="button">
				<h:graphicImage library="icons" name="question-mark-circle.svg"
					title="#{msg['show_help']}" styleClass="nav-link" />
			</h:outputLink>

			<h:panelGroup layout="block" id="help"
				styleClass="offcanvas offcanvas-start" p:tabindex="-1">

				<h:panelGroup layout="block" styleClass="offcanvas-header">
					<h:outputText value="#{msg['help']}"
						styleClass="h5 offcanvas-title" />
					<h:form id="button_close_help">
						<h:commandButton styleClass="btn-close text-reset"
							p:data-bs-dismiss="offcanvas" p:aria-label="Close" />
					</h:form>
				</h:panelGroup>

				<h:panelGroup layout="block" styleClass="offcanvas-body">

					<h:panelGroup layout="block" styleClass="public">
						#{msg['help.'.concat(page).concat('.public')]}
					</h:panelGroup>

					<h:panelGroup layout="block" styleClass="account"
						rendered="#{pageHeader.showingAccountHelp()}">
						#{msg['help.'.concat(page).concat('.account')]}
					</h:panelGroup>

					<h:panelGroup layout="block" styleClass="staff"
						rendered="#{pageHeader.showingStaffHelp()}">
						#{msg['help.'.concat(page).concat('.staff')]}
					</h:panelGroup>

					<h:panelGroup layout="block" styleClass="admin"
						rendered="#{pageHeader.showingAdminHelp()}">
						#{msg['help.'.concat(page).concat('.admin')]}
					</h:panelGroup>

				</h:panelGroup>

			</h:panelGroup>

			<h:form id="form_log_out" rendered="#{pageHeader.showingLogOut()}"
				styleClass="nav-item">
				<h:commandLink id="button_log_out" value="#{msg['log_out']}"
					action="#{pageHeader.logOut()}" styleClass="nav-link" />
			</h:form>

			<h:link value="#{msg['lending']}" outcome="/view/staff/lending.xhtml"
				rendered="#{pageHeader.showingLending()}"
				styleClass="nav-link #{page == 'lending' ? 'active' : ''}" />

			<h:link value="#{msg['return_form']}"
				outcome="/view/staff/return-form.xhtml"
				rendered="#{pageHeader.showingReturnForm()}"
				styleClass="nav-link #{page == 'return_form' ? 'active' : ''}" />

			<h:link value="#{msg['copies_ready_for_pickup_all_users']}"
				outcome="/view/staff/copies-ready-for-pickup-all-users.xhtml"
				rendered="#{pageHeader.showingCopiesReadyForPickupAllUsers()}"
				styleClass="nav-link #{page == 'copies_ready_for_pickup_all_users' ? 'active' : ''}" />

			<h:link value="#{msg['medium_creator']}"
				outcome="/view/staff/medium-creator.xhtml"
				rendered="#{pageHeader.showingMediumCreator()}"
				styleClass="nav-link #{page == 'medium_creator' ? 'active' : ''}" />

			<h:link value="#{msg['profile']}"
				outcome="/view/account/profile.xhtml?id=#{userSession.user.id}"
				rendered="#{pageHeader.showingProfile()}"
				styleClass="nav-link #{page == 'profile' ? 'active' : ''}" />

			<h:link value="#{msg['administration']}"
				outcome="/view/admin/administration.xhtml"
				rendered="#{pageHeader.showingAdministration()}"
				styleClass="nav-link #{page == 'administration' ? 'active' : ''}" />

			<h:link value="#{msg['log_in']}" outcome="/view/public/login.xhtml"
				rendered="#{pageHeader.showingLogin()}"
				styleClass="nav-link #{page == 'login' ? 'active' : ''}" />

			<h:link value="#{msg['register']}"
				outcome="/view/public/registration.xhtml"
				rendered="#{pageHeader.showingRegistration()}"
				styleClass="nav-link #{page == 'registration' ? 'active' : ''}" />

			<h:link value="#{msg['advanced_search']}"
				outcome="/view/public/medium-search.xhtml"
				styleClass="nav-link #{page == 'medium_search' ? 'active' : ''}" />

			<h:form id="form_medium_search_header"
				action="#{pageHeader.searchMedium()}" styleClass="">
				<h:inputText id="input_medium_search_term"
					value="#{pageHeader.mediumSearch.generalSearchTerm}"
					styleClass="nav-item form-control" />
			</h:form>

		</h:panelGroup>

	</h:panelGroup>

	<h:messages globalOnly="true" showDetail="false"
		styleClass="message global" infoClass="info" warningClass="warning"
		errorClass="error" />

</ui:composition>