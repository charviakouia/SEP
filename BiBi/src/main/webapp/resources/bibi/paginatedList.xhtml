<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:bibi="http://xmlns.jcp.org/jsf/composite/bibi">

	<cc:interface>
		<cc:attribute name="value"
			type="de.dedede.model.logic.managed_beans.PaginatedList" />
		<cc:attribute name="styleClass" />
	</cc:interface>

	<cc:implementation>

		<h:panelGroup layout="block"
			styleClass="btn-toolbar justify-content-center #{cc.attrs.styleClass}">

			<h:form id="form_go_back" styleClass="btn-group">
				<h:commandButton id="button_go_back" value="#{msg['previous_page']}"
					action="#{cc.attrs.value.goBack()}"
					disabled="#{cc.attrs.value.firstPage}"
					styleClass="btn btn-outline-secondary" style="z-index: 1000" />
			</h:form>

			<h:form id="form_page_number" styleClass="input-group">
				<h:inputText id="input_current_page"
					value="#{cc.attrs.value.pageNumber}" styleClass="form-control" />

				<h:panelGroup styleClass="input-group-text">
					/
				</h:panelGroup>

				<h:inputText
					value="#{cc.attrs.value.paginatedList.totalAmountOfPages}"
					styleClass="form-control" readonly="true" />
				<!--
				Indeed, the button below is not displayed to the user but it is triggered when a user presses
				the enter key inside of the input field. Not showing a button is a stylistic choice of mine.
				Unfortunately, I have to fall back to this hack since "action" is not an attribute of a form
				element and the attribute "valueChangeListener" on input fields fires *before* the setter which
				breaks the logic in the backing bean and "actionListener" does not work either.
				-->
				<h:commandButton id="button_current_page"
					action="#{cc.attrs.value.goToPage()}" style="display: none;" />
			</h:form>

			<h:form id="form_go_forward" styleClass="btn-group">
				<h:commandButton id="button_go_forward" value="#{msg['next_page']}"
					action="#{cc.attrs.value.goForward()}"
					disabled="#{cc.attrs.value.lastPage}"
					styleClass="btn btn-outline-secondary" />
			</h:form>

		</h:panelGroup>

		<h:dataTable value="#{cc.attrs.value.items}" var="item"
			varStatus="status" styleClass="table">

			<cc:insertChildren />

		</h:dataTable>

	</cc:implementation>

</ui:composition>